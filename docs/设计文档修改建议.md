# ğŸ“ HangHand è®¾è®¡æ–‡æ¡£ä¿®æ”¹å»ºè®®

**ç”Ÿæˆæ—¶é—´**: 2026-01-XX  
**æ–‡æ¡£ç‰ˆæœ¬**: System Design v2.0  
**å®¡æŸ¥èŒƒå›´**: ç³»ç»Ÿè®¾è®¡æ–‡æ¡£ã€äº§å“éœ€æ±‚æ–‡æ¡£ã€æ•°æ®åº“Schema

---

## ğŸ”´ ä¸¥é‡é—®é¢˜ (Critical Issues)

### 1. ç§ŸèµæŠ¼é‡‘æ”¯ä»˜é€»è¾‘çŸ›ç›¾ âš ï¸

**é—®é¢˜ä½ç½®**: `docs/system_design_document.md` Section 6.3

**é—®é¢˜æè¿°**:
- **Step 1** è¯´: "Total Charge: $294.50" (åŒ…å« $200 æŠ¼é‡‘)
- **Step 2** è¯´: "Deposit: **Authorized Hold** (Stripe) - frozen on card, not charged"

è¿™æ˜¯çŸ›ç›¾çš„ï¼šå¦‚æœæŠ¼é‡‘æ˜¯"é¢„æˆæƒå†»ç»“"ï¼ˆä¸æ‰£æ¬¾ï¼‰ï¼Œé‚£ä¹ˆ Total Charge ä¸åº”è¯¥åŒ…å«æŠ¼é‡‘ã€‚

**ä¿®æ”¹å»ºè®®**:

```markdown
### 6.3 Payment Flow

**Step 1: Checkout**
```
User Pays: Rental Fee + Platform Fee
Deposit: Pre-authorized Hold (NOT charged)
Example:
- Rental: $90 (3 days Ã— $30)
- Platform Fee: $4.50 (5%)
- Deposit: $200 (AUTHORIZED HOLD, not charged)
Total Charge: $94.50 (Rental + Fee only)
Deposit Hold: $200 (separate authorization)
```

**Step 2: During Rental**
- Rental fee: Escrowed (held in platform account)
- Deposit: **Authorized Hold** (Stripe) - frozen on card, not charged
- Total available credit needed: $294.50 ($94.50 charge + $200 hold)
```

**å½±å“**: éœ€è¦æ›´æ–°å‰ç«¯æ”¯ä»˜æµç¨‹å’Œ Stripe é›†æˆé€»è¾‘ã€‚

---

### 2. è®¢å•çŠ¶æ€æœºå®šä¹‰ä¸å®Œæ•´ âš ï¸

**é—®é¢˜ä½ç½®**: 
- `docs/system_design_document.md` Section 4.7
- `src/types/orders.ts` vs `src/types/domain.ts`

**é—®é¢˜æè¿°**:
1. è®¾è®¡æ–‡æ¡£å®šä¹‰äº†6ç§äº¤æ˜“æ¨¡å‹ï¼Œæ¯ç§éƒ½æœ‰ä¸åŒçš„çŠ¶æ€æœº
2. ä½†ä»£ç ä¸­æœ‰ä¸¤ä¸ªä¸åŒçš„ `OrderStatus` å®šä¹‰ï¼š
   - `src/types/domain.ts`: åŸºç¡€çŠ¶æ€ï¼ˆ6ä¸ªï¼‰
   - `src/types/orders.ts`: æ‰©å±•çŠ¶æ€ï¼ˆ10ä¸ªï¼‰
3. è®¾è®¡æ–‡æ¡£ä¸­çš„çŠ¶æ€ï¼ˆå¦‚ `CONFIRMED_VISIT`, `VISIT_COMPLETED`, `PICKED_UP`, `RETURNED`, `SETTLED`ï¼‰åœ¨ä»£ç ä¸­ç¼ºå¤±

**ä¿®æ”¹å»ºè®®**:

#### 2.1 ç»Ÿä¸€ OrderStatus ç±»å‹å®šä¹‰

åœ¨ `src/types/orders.ts` ä¸­æ‰©å±•çŠ¶æ€ä»¥è¦†ç›–æ‰€æœ‰äº¤æ˜“æ¨¡å‹ï¼š

```typescript
export type OrderStatus =
    // Common states
    | 'DRAFT'                    // Order created but not submitted
    | 'PENDING_PAYMENT'          // Awaiting payment
    | 'PENDING_CONFIRMATION'     // Paid, waiting for provider
    | 'IN_PROGRESS'              // Service ongoing
    | 'COMPLETED'                // Finished
    | 'CANCELLED'                // Cancelled
    | 'DISPUTED'                 // Under dispute
    
    // Quote & Call specific
    | 'PENDING_DEPOSIT'          // Waiting for visit fee
    | 'CONFIRMED_VISIT'          // Visit scheduled
    | 'VISIT_COMPLETED'          // Provider completed visit
    | 'PENDING_QUOTE_PAYMENT'    // Quote submitted, waiting payment
    | 'ACCEPTED_QUOTE'           // Quote accepted by buyer
    
    // Rental specific
    | 'PENDING_BASE_PAYMENT'      // Waiting for rental fee
    | 'DEPOSIT_AUTHORIZED'       // Deposit hold placed
    | 'PICKED_UP'                // Item picked up
    | 'RETURNED'                 // Item returned
    | 'SETTLED'                  // Deposit released/settled
    
    // Seasonal/Subscription specific
    | 'CONTRACT_SIGNED'          // Seasonal contract signed
    | 'PENDING_MILESTONE_1'      // Waiting for milestone payment
    | 'MILESTONE_1_COMPLETE'     // Milestone completed
    | 'SEASON_CLOSED'            // Season ended
    
    // Face-to-Face specific
    | 'RESERVED'                 // Reserved, no payment
    | 'MEETUP_CONFIRMED'         // Meetup scheduled
    | 'PAID_OFFLINE'             // Paid offline, marked complete
    
    // Deposit-Only specific
    | 'BOOKED'                   // Deposit paid, slot secured
    | 'PENDING_FINAL_PAYMENT';   // Waiting for balance payment
```

#### 2.2 æ›´æ–°è®¾è®¡æ–‡æ¡£

åœ¨ Section 4.7 ä¸­æ·»åŠ çŠ¶æ€è½¬æ¢å›¾ï¼Œæ˜ç¡®æ¯ä¸ªçŠ¶æ€çš„è§¦å‘æ¡ä»¶ï¼š

```markdown
### 4.7 State Machine by Transactional Model

#### Model 1: Instant Pay
```
DRAFT 
  â†’ (User clicks "Book Now") 
PENDING_PAYMENT 
  â†’ (Payment successful) 
PENDING_CONFIRMATION 
  â†’ (Provider accepts) 
IN_PROGRESS 
  â†’ (Service completed) 
COMPLETED
  â†’ (48h auto-release funds)
```

#### Model 2: Quote & Call
```
DRAFT 
  â†’ (User pays visit fee) 
PENDING_DEPOSIT 
  â†’ (Provider confirms visit) 
CONFIRMED_VISIT 
  â†’ (Provider completes visit) 
VISIT_COMPLETED 
  â†’ (Provider submits quote via chat) 
PENDING_QUOTE_PAYMENT 
  â†’ (User accepts quote & pays) 
ACCEPTED_QUOTE 
  â†’ (Work starts) 
IN_PROGRESS 
  â†’ (Work completed) 
COMPLETED
```

[ç»§ç»­å…¶ä»–æ¨¡å‹...]
```

---

### 3. æ•°æ®åº“Schemaç¼ºå¤±ç§Ÿèµå­—æ®µ âš ï¸

**é—®é¢˜ä½ç½®**: 
- `docs/system_design_document.md` Section 6.4
- `docs/supabase_schema.sql`

**é—®é¢˜æè¿°**:
è®¾è®¡æ–‡æ¡£ Section 6.4 è¦æ±‚æ·»åŠ ç§Ÿèµç›¸å…³å­—æ®µï¼Œä½† `supabase_schema.sql` ä¸­çš„ `orders` è¡¨ç¼ºå°‘ï¼š
- `rental_start_date DATE`
- `rental_end_date DATE`
- `deposit_amount INTEGER`
- `deposit_status TEXT`

**ä¿®æ”¹å»ºè®®**:

åœ¨ `docs/supabase_schema.sql` çš„ `orders` è¡¨å®šä¹‰åæ·»åŠ ï¼š

```sql
-- Rental-specific fields (Section 6.4)
ALTER TABLE public.orders 
ADD COLUMN IF NOT EXISTS rental_start_date DATE,
ADD COLUMN IF NOT EXISTS rental_end_date DATE,
ADD COLUMN IF NOT EXISTS deposit_amount INTEGER DEFAULT 0,
ADD COLUMN IF NOT EXISTS deposit_status TEXT DEFAULT 'HELD'; -- HELD, RETURNED, FORFEITED

-- Rental condition tracking table
CREATE TABLE IF NOT EXISTS public.rental_condition_logs (
  log_id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  order_id UUID REFERENCES public.orders(id) ON DELETE CASCADE,
  pre_rental_photos TEXT[],   -- Before pickup
  post_rental_photos TEXT[],  -- After return
  damage_detected BOOLEAN DEFAULT FALSE,
  damage_cost_estimate INTEGER DEFAULT 0,
  logged_by UUID REFERENCES public.user_profiles(id),
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- Deposit transactions table
CREATE TABLE IF NOT EXISTS public.deposit_transactions (
  transaction_id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  order_id UUID REFERENCES public.orders(id) ON DELETE CASCADE,
  deposit_amount INTEGER NOT NULL,
  deposit_status TEXT NOT NULL,  -- HELD, RETURNED, FORFEITED
  returned_amount INTEGER DEFAULT 0,
  forfeited_reason TEXT,
  stripe_payment_intent_id TEXT, -- For tracking the hold
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);
```

---

### 4. äº¤æ˜“æ¨¡å‹é€‰æ‹©é€»è¾‘æœªå®ç° âš ï¸

**é—®é¢˜ä½ç½®**: 
- `docs/system_design_document.md` Section 4.6
- `src/services/repositories/supabase/OrderRepository.ts`

**é—®é¢˜æè¿°**:
è®¾è®¡æ–‡æ¡£å®šä¹‰äº†ä¸‰çº§ä¼˜å…ˆçº§é€‰æ‹©é€»è¾‘ï¼ˆItem > Master > Categoryï¼‰ï¼Œä½†ä»£ç ä¸­ï¼š
- `listing_masters` è¡¨ç¼ºå°‘ `preferred_transaction_model` å­—æ®µ
- `listing_items` è¡¨ç¼ºå°‘ `transaction_model_override` å­—æ®µ
- æ²¡æœ‰å®ç°é€‰æ‹©é€»è¾‘å‡½æ•°

**ä¿®æ”¹å»ºè®®**:

#### 4.1 æ›´æ–°æ•°æ®åº“Schema

```sql
-- Add transaction model fields
ALTER TABLE public.listing_masters 
ADD COLUMN IF NOT EXISTS preferred_transaction_model TEXT DEFAULT 'INSTANT_PAY';

ALTER TABLE public.listing_items 
ADD COLUMN IF NOT EXISTS transaction_model_override TEXT;

-- Add category default mapping (in ref_codes extra_data)
-- Example: Category '1010200' (Skilled Trades) defaults to 'QUOTE_AND_CALL'
```

#### 4.2 å®ç°é€‰æ‹©é€»è¾‘å‡½æ•°

åœ¨ `src/services/repositories/supabase/OrderRepository.ts` ä¸­æ·»åŠ ï¼š

```typescript
/**
 * Determine transaction model based on tiered priority
 * Priority: Item Override > Master Default > Category Default
 */
async function determineTransactionModel(
  itemId: string,
  masterId: string,
  categoryId: string
): Promise<string> {
  // 1. Check Item Override (Highest Priority)
  const { data: item } = await supabase
    .from('listing_items')
    .select('transaction_model_override')
    .eq('id', itemId)
    .single();
  
  if (item?.transaction_model_override) {
    return item.transaction_model_override;
  }
  
  // 2. Check Master Default
  const { data: master } = await supabase
    .from('listing_masters')
    .select('preferred_transaction_model')
    .eq('id', masterId)
    .single();
  
  if (master?.preferred_transaction_model) {
    return master.preferred_transaction_model;
  }
  
  // 3. Check Category Default (Lowest Priority)
  const { data: category } = await supabase
    .from('ref_codes')
    .select('extra_data')
    .eq('code_id', categoryId)
    .single();
  
  const categoryDefault = category?.extra_data?.default_transaction_model;
  return categoryDefault || 'INSTANT_PAY'; // Fallback
}
```

#### 4.3 æ›´æ–°è®¾è®¡æ–‡æ¡£

åœ¨ Section 4.6 ä¸­æ·»åŠ å®ç°ç»†èŠ‚å’Œä»£ç ç¤ºä¾‹ã€‚

---

## ğŸŸ¡ é‡è¦é—®é¢˜ (Important Issues)

### 5. ç¨åŠ¡è®¡ç®—è§„åˆ™æœªæ˜ç¡®å®ç° âš ï¸

**é—®é¢˜ä½ç½®**: 
- `docs/system_design_document.md` Section 9.4
- ä»£ç ä¸­ç¼ºå°‘ç¨åŠ¡è®¡ç®—é€»è¾‘

**é—®é¢˜æè¿°**:
è®¾è®¡æ–‡æ¡£è¯¦ç»†è¯´æ˜äº†åŠ æ‹¿å¤§ç¨åŠ¡è§„åˆ™ï¼Œä½†ï¼š
1. `provider_profiles` è¡¨ç¼ºå°‘ `is_tax_registered` å­—æ®µ
2. ç¼ºå°‘ç¨åŠ¡è®¡ç®—å‡½æ•°
3. å‰ç«¯æ²¡æœ‰æ˜¾ç¤ºç¨åŠ¡æ˜ç»†

**ä¿®æ”¹å»ºè®®**:

#### 5.1 æ›´æ–°æ•°æ®åº“Schema

```sql
-- Add tax registration fields
ALTER TABLE public.provider_profiles 
ADD COLUMN IF NOT EXISTS is_tax_registered BOOLEAN DEFAULT FALSE,
ADD COLUMN IF NOT EXISTS hst_gst_number TEXT; -- CRA registration number
```

#### 5.2 å®ç°ç¨åŠ¡è®¡ç®—å‡½æ•°

åˆ›å»º `src/services/taxCalculator.ts`:

```typescript
interface TaxCalculationInput {
  baseAmount: number;
  platformFee: number;
  providerIsTaxRegistered: boolean;
  listingType: 'SERVICE' | 'RENTAL' | 'GOODS' | 'TASK';
  province: string; // 'ON', 'BC', 'QC', etc.
}

interface TaxCalculationResult {
  providerTax: number;      // HST/GST on service (if registered)
  platformTax: number;      // HST/GST on platform fee (always)
  totalTax: number;
  breakdown: {
    baseAmount: number;
    providerTax: number;
    platformFee: number;
    platformTax: number;
    total: number;
  };
}

export function calculateCanadianTax(input: TaxCalculationInput): TaxCalculationResult {
  const hstRate = getHSTRate(input.province); // e.g., 13% for ON
  
  // Rule 1: Provider tax only if registered
  const providerTax = input.providerIsTaxRegistered 
    ? Math.round(input.baseAmount * hstRate)
    : 0;
  
  // Rule 2: Platform fee always taxed
  const platformTax = Math.round(input.platformFee * hstRate);
  
  // Rule 3: P2P Used Goods are tax-exempt
  const isTaxExempt = input.listingType === 'GOODS' && !input.providerIsTaxRegistered;
  
  return {
    providerTax: isTaxExempt ? 0 : providerTax,
    platformTax,
    totalTax: isTaxExempt ? platformTax : providerTax + platformTax,
    breakdown: {
      baseAmount: input.baseAmount,
      providerTax: isTaxExempt ? 0 : providerTax,
      platformFee: input.platformFee,
      platformTax,
      total: input.baseAmount + input.platformFee + (isTaxExempt ? platformTax : providerTax + platformTax)
    }
  };
}
```

#### 5.3 æ›´æ–°è®¾è®¡æ–‡æ¡£

åœ¨ Section 9.4 ä¸­æ·»åŠ ä»£ç ç¤ºä¾‹å’Œæµ‹è¯•ç”¨ä¾‹ã€‚

---

### 6. è®¢å•å¿«ç…§ç»“æ„ä¸å®Œæ•´ âš ï¸

**é—®é¢˜ä½ç½®**: 
- `docs/system_design_document.md` Section 10.1
- `src/types/orders.ts` OrderSnapshot

**é—®é¢˜æè¿°**:
è®¾è®¡æ–‡æ¡£è¦æ±‚å¿«ç…§åŒ…å«å®Œæ•´çš„ ListingMaster å’Œ ListingItem çŠ¶æ€ï¼Œä½†å½“å‰çš„ `OrderSnapshot` ç¼ºå°‘ï¼š
- æœåŠ¡å•†ä½ç½®ä¿¡æ¯
- æœåŠ¡èŒƒå›´ï¼ˆradiusï¼‰
- è®¤è¯çº§åˆ«
- è®¸å¯è¯ä¿¡æ¯

**ä¿®æ”¹å»ºè®®**:

æ›´æ–° `src/types/orders.ts`:

```typescript
export interface OrderSnapshot {
    // Master info
    masterTitle: string;
    masterDescription: string;
    masterImages: string[];
    masterType: ListingType;
    masterCategoryId: string;
    masterLocation: Address;
    
    // Item info
    itemName: string;
    itemDescription: string;
    itemPricing: {
        model: string;
        price: Money;
        unit?: string;
        deposit?: Money;
    };
    itemAttributes?: Record<string, any>;
    
    // Provider info (at time of order)
    providerName: string;
    providerBadges: string[];
    providerVerificationLevel: number;
    providerLicenseInfo?: string;
    providerInsuranceInfo?: string;
    providerLocation: Address;
    providerServiceRadius: number; // km
    
    // Pricing snapshot
    pricingAtOrderTime: {
        baseAmount: Money;
        platformFee: Money;
        taxAmount?: Money;
        depositAmount?: Money;
    };
}
```

---

### 7. æ¶ˆæ¯ç³»ç»Ÿä¸­çš„ Quote æ¶ˆæ¯ç±»å‹æœªå®ç° âš ï¸

**é—®é¢˜ä½ç½®**: 
- `docs/system_design_document.md` Section 23.3
- `src/services/repositories/supabase/MessageRepository.ts`

**é—®é¢˜æè¿°**:
è®¾è®¡æ–‡æ¡£å®šä¹‰äº† "Quote-via-Chat" æµç¨‹ï¼Œä½†ï¼š
1. `messages` è¡¨çš„ `message_type` åªæœ‰ 'TEXT'ï¼Œç¼ºå°‘ 'QUOTE'
2. æ²¡æœ‰å®ç° Quote æ¶ˆæ¯çš„æ•°æ®ç»“æ„
3. æ²¡æœ‰å®ç° "Accept Quote" æŒ‰é’®é€»è¾‘

**ä¿®æ”¹å»ºè®®**:

#### 7.1 æ›´æ–°æ•°æ®åº“Schema

```sql
-- Update messages table to support QUOTE type
ALTER TABLE public.messages 
ADD COLUMN IF NOT EXISTS quote_data JSONB; -- Stores quote details

-- Example quote_data structure:
-- {
--   "baseAmount": 5000,
--   "laborHours": 2,
--   "materialsCost": 1000,
--   "totalAmount": 6000,
--   "expiresAt": "2026-01-15T10:00:00Z"
-- }
```

#### 7.2 å®ç° Quote æ¶ˆæ¯ç±»å‹

åœ¨ `src/types/messages.ts` ä¸­æ·»åŠ ï¼š

```typescript
export type MessageType = 'TEXT' | 'IMAGE' | 'SYSTEM' | 'QUOTE';

export interface QuoteMessageData {
  baseAmount: number;
  laborHours?: number;
  materialsCost?: number;
  totalAmount: number;
  expiresAt: string;
  scopeDescription?: string;
}
```

#### 7.3 æ›´æ–°è®¾è®¡æ–‡æ¡£

åœ¨ Section 23.3 ä¸­æ·»åŠ  Quote æ¶ˆæ¯çš„æ•°æ®ç»“æ„ç¤ºä¾‹ã€‚

---

## ğŸŸ¢ æ”¹è¿›å»ºè®® (Enhancement Suggestions)

### 8. æ·»åŠ é”™è¯¯å¤„ç†å’Œè¾¹ç•Œæƒ…å†µæ–‡æ¡£

**å»ºè®®**: åœ¨ç³»ç»Ÿè®¾è®¡æ–‡æ¡£ä¸­æ·»åŠ ä¸“é—¨çš„ "Error Handling & Edge Cases" ç« èŠ‚ï¼ŒåŒ…æ‹¬ï¼š
- æ”¯ä»˜å¤±è´¥å¤„ç†
- ç½‘ç»œä¸­æ–­æ¢å¤
- å¹¶å‘è®¢å•å†²çª
- åº“å­˜ä¸è¶³å¤„ç†
- æœåŠ¡å•†å–æ¶ˆè®¢å•çš„è¡¥å¿æœºåˆ¶

### 9. æ·»åŠ æ€§èƒ½æŒ‡æ ‡å’ŒSLAå®šä¹‰

**å»ºè®®**: åœ¨ç³»ç»Ÿè®¾è®¡æ–‡æ¡£ä¸­æ·»åŠ  "Performance & Scalability" ç« èŠ‚ï¼Œå®šä¹‰ï¼š
- API å“åº”æ—¶é—´ç›®æ ‡ï¼ˆ< 200msï¼‰
- æ•°æ®åº“æŸ¥è¯¢ä¼˜åŒ–ç­–ç•¥
- ç¼“å­˜ç­–ç•¥ï¼ˆRedis/å†…å­˜ç¼“å­˜ï¼‰
- å›¾ç‰‡CDNä½¿ç”¨
- å®æ—¶æ¶ˆæ¯å»¶è¿Ÿç›®æ ‡ï¼ˆ< 1sï¼‰

### 10. å®Œå–„æµ‹è¯•ç­–ç•¥æ–‡æ¡£

**å»ºè®®**: åˆ›å»º `docs/TESTING_STRATEGY.md`ï¼ŒåŒ…æ‹¬ï¼š
- å•å…ƒæµ‹è¯•è¦†ç›–ç‡ç›®æ ‡ï¼ˆ> 80%ï¼‰
- é›†æˆæµ‹è¯•åœºæ™¯
- E2Eæµ‹è¯•æµç¨‹
- è´Ÿè½½æµ‹è¯•è®¡åˆ’
- å®‰å…¨æµ‹è¯•æ¸…å•

### 11. æ·»åŠ æ•°æ®è¿ç§»å’Œç‰ˆæœ¬ç®¡ç†ç­–ç•¥

**å»ºè®®**: åœ¨ç³»ç»Ÿè®¾è®¡æ–‡æ¡£ä¸­æ·»åŠ  "Database Migration Strategy" ç« èŠ‚ï¼ŒåŒ…æ‹¬ï¼š
- Schemaç‰ˆæœ¬ç®¡ç†
- æ•°æ®è¿ç§»è„šæœ¬è§„èŒƒ
- å›æ»šç­–ç•¥
- é›¶åœæœºè¿ç§»æ–¹æ¡ˆ

### 12. å®Œå–„APIæ–‡æ¡£è§„èŒƒ

**å»ºè®®**: åˆ›å»º `docs/API_DOCUMENTATION.md`ï¼ŒåŒ…æ‹¬ï¼š
- Repositoryæ¥å£è§„èŒƒ
- é”™è¯¯ç å®šä¹‰
- è¯·æ±‚/å“åº”æ ¼å¼
- è®¤è¯æœºåˆ¶
- Rate Limitingç­–ç•¥

---

## ğŸ“‹ ä¼˜å…ˆçº§æ€»ç»“

| ä¼˜å…ˆçº§ | é—®é¢˜ | å½±å“ | å»ºè®®å®Œæˆæ—¶é—´ |
|--------|------|------|-------------|
| ğŸ”´ P0 | ç§ŸèµæŠ¼é‡‘é€»è¾‘çŸ›ç›¾ | æ”¯ä»˜æµç¨‹é”™è¯¯ | ç«‹å³ä¿®å¤ |
| ğŸ”´ P0 | è®¢å•çŠ¶æ€æœºä¸å®Œæ•´ | ä¸šåŠ¡æµç¨‹é˜»å¡ | 1å‘¨å†… |
| ğŸ”´ P0 | æ•°æ®åº“Schemaç¼ºå¤± | åŠŸèƒ½æ— æ³•å®ç° | 1å‘¨å†… |
| ğŸ”´ P0 | äº¤æ˜“æ¨¡å‹é€‰æ‹©é€»è¾‘ | ä¸šåŠ¡é€»è¾‘é”™è¯¯ | 2å‘¨å†… |
| ğŸŸ¡ P1 | ç¨åŠ¡è®¡ç®—è§„åˆ™ | åˆè§„é£é™© | 2å‘¨å†… |
| ğŸŸ¡ P1 | è®¢å•å¿«ç…§ç»“æ„ | æ•°æ®å®Œæ•´æ€§ | 2å‘¨å†… |
| ğŸŸ¡ P1 | Quoteæ¶ˆæ¯ç±»å‹ | åŠŸèƒ½ç¼ºå¤± | 3å‘¨å†… |
| ğŸŸ¢ P2 | é”™è¯¯å¤„ç†æ–‡æ¡£ | å¼€å‘æ•ˆç‡ | 4å‘¨å†… |
| ğŸŸ¢ P2 | æ€§èƒ½æŒ‡æ ‡å®šä¹‰ | å¯æ‰©å±•æ€§ | 4å‘¨å†… |

---

## âœ… ä¿®æ”¹æ£€æŸ¥æ¸…å•

åœ¨å®æ–½ä¿®æ”¹åï¼Œè¯·æ£€æŸ¥ï¼š

- [ ] æ‰€æœ‰æ•°æ®åº“Schemaå˜æ›´å·²åº”ç”¨åˆ° `supabase_schema.sql`
- [ ] TypeScriptç±»å‹å®šä¹‰å·²æ›´æ–°å¹¶åŒæ­¥
- [ ] è®¾è®¡æ–‡æ¡£ä¸­çš„ä»£ç ç¤ºä¾‹å·²éªŒè¯å¯æ‰§è¡Œ
- [ ] æ‰€æœ‰çŠ¶æ€è½¬æ¢å›¾å·²æ›´æ–°
- [ ] å‰ç«¯ç»„ä»¶å·²é€‚é…æ–°çš„çŠ¶æ€å’Œå­—æ®µ
- [ ] æµ‹è¯•ç”¨ä¾‹å·²æ›´æ–°è¦†ç›–æ–°é€»è¾‘
- [ ] APIæ–‡æ¡£å·²æ›´æ–°

---

**æ–‡æ¡£ç»´æŠ¤è€…**: å¼€å‘å›¢é˜Ÿ  
**ä¸‹æ¬¡å®¡æŸ¥æ—¥æœŸ**: 2026-02-XX

